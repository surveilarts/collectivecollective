<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Enchanted Oasis: A Blue & Green Experience</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script>
      // Bounce-orb component: Orbs move with a slow, randomized velocity and reverse direction on collision.
      AFRAME.registerComponent('bounce-orb', {
        schema: {
          speed: { type: 'number', default: 0.3 } // Slowed down for a gentle effect.
        },
        init: function () {
          // Initialize a random velocity vector.
          this.velocity = new THREE.Vector3(
            (Math.random() * 2 - 1) * this.data.speed,
            (Math.random() * 2 - 1) * this.data.speed,
            (Math.random() * 2 - 1) * this.data.speed
          );
          // Define room boundaries (assuming a room 10 x 10 with a floor at y=0 and ceiling at y=4).
          this.boundaries = {
            xMin: -5, xMax: 5,
            yMin: 0.5, yMax: 3.5,  // Keeping orbs slightly above the floor and below the ceiling.
            zMin: -5, zMax: 5
          };
        },
        tick: function (time, delta) {
          delta = delta / 1000; // Convert delta to seconds.
          let pos = this.el.object3D.position;
          pos.addScaledVector(this.velocity, delta);
          
          // Bounce off X-axis boundaries.
          if (pos.x <= this.boundaries.xMin || pos.x >= this.boundaries.xMax) {
            this.velocity.x = -this.velocity.x;
            pos.x = THREE.Math.clamp(pos.x, this.boundaries.xMin, this.boundaries.xMax);
          }
          // Bounce off Y-axis boundaries.
          if (pos.y <= this.boundaries.yMin || pos.y >= this.boundaries.yMax) {
            this.velocity.y = -this.velocity.y;
            pos.y = THREE.Math.clamp(pos.y, this.boundaries.yMin, this.boundaries.yMax);
          }
          // Bounce off Z-axis boundaries.
          if (pos.z <= this.boundaries.zMin || pos.z >= this.boundaries.zMax) {
            this.velocity.z = -this.velocity.z;
            pos.z = THREE.Math.clamp(pos.z, this.boundaries.zMin, this.boundaries.zMax);
          }
        }
      });

      // Component to spawn multiple slow-moving orbs within the room.
      AFRAME.registerComponent('spawn-orbs', {
        schema: {
          count: { type: 'int', default: 8 }
        },
        init: function () {
          const sceneEl = this.el;
          for (let i = 0; i < this.data.count; i++) {
            let orb = document.createElement('a-sphere');
            orb.setAttribute('radius', '0.2');
            // Set the orb's color to a sea green tone.
            orb.setAttribute('color', '#2E8B57');
            // Randomize starting positions inside the room.
            let posX = Math.random() * 8 - 4;  // from -4 to 4
            let posY = Math.random() * 2 + 1;    // from 1 to 3
            let posZ = Math.random() * 8 - 4;    // from -4 to 4
            orb.setAttribute('position', { x: posX, y: posY, z: posZ });
            orb.setAttribute('bounce-orb', '');
            sceneEl.appendChild(orb);
          }
        }
      });
    </script>
    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <a-scene spawn-orbs>
      <!-- Lighting: Soft ambient and directional light to accentuate the color palette. -->
      <a-entity light="type: ambient; intensity: 0.6" color="#ffffff"></a-entity>
      <a-entity light="type: directional; intensity: 0.8" position="0 5 5"></a-entity>
      
      <!-- Floor: Mint color for a calming base. -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#AAF0D1"></a-plane>
      
      <!-- Ceiling: A gentle, beautiful blue tone sets a serene mood. -->
      <a-plane position="0 4 0" rotation="90 0 0" width="10" height="10" color="#B3E5FC"></a-plane>
      
      <!-- Walls: Front and back in a vibrant green, side walls in a soft sea green. -->
      <!-- Back Wall -->
      <a-plane position="0 2 -5" rotation="0 0 0" width="10" height="4" color="#22C55E"></a-plane>
      <!-- Front Wall -->
      <a-plane position="0 2 5" rotation="0 180 0" width="10" height="4" color="#22C55E"></a-plane>
      <!-- Left Wall -->
      <a-plane position="-5 2 0" rotation="0 90 0" width="10" height="4" color="#2E8B57"></a-plane>
      <!-- Right Wall -->
      <a-plane position="5 2 0" rotation="0 -90 0" width="10" height="4" color="#2E8B57"></a-plane>
      
      <!-- Camera Rig: Move around using WASD and look-controls. -->
      <a-entity id="rig" position="0 1.6 0">
        <a-entity camera wasd-controls look-controls></a-entity>
      </a-entity>
      
      <!-- Sky: A soft blue sky adds extra depth to the scene. -->
      <a-sky color="#A1C4FD"></a-sky>
    </a-scene>
  </body>
</html>
